
<!-- ######## Risabh Mishra ########## -->

{% extends 'base.html' %}
{% block title %}Camera{% endblock title %}
{% block camera_active %}active{% endblock camera_active %}
{% block head %}
    {% load static %}
    <link rel="stylesheet" href="{% static '/css/camera.css' %}">

    <script type="text/javascript">
    var a;

        function func(x) {
    var xhttp = new XMLHttpRequest();
     xhttp.onreadystatechange = function() {
  if (this.readyState == 4 && this.status == 200) {
          data = this.responseText.split('%');
      document.getElementById("snaps").src = data[0];
      document.getElementById('ivideo').src = '';
      document.getElementById('vidbut').style.display='block';
      document.getElementById('ivideo').style.display='hidden';
      a=data[1];
  }
};
xhttp.open("GET", "http://127.0.0.1:8000/buttonlink/"+x, true);
xhttp.send();
  }

  function video_but() {
      document.getElementById('vidbut').style.display='none';
      document.getElementById('ivideo').style.display='block';
      document.getElementById("ivideo").src = data[1];
  }

var modal = document.getElementById('myModal');

// Get the image and insert it inside the modal - use its "alt" text as a caption
var img = document.getElementById('snaps');
var modalImg = document.getElementById("img01");
var captionText = document.getElementById("caption");
img.onclick = function(){
    modal.style.display = "block";
    modalImg.src = this.src;
    captionText.innerHTML = this.alt;
}

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
    modal.style.display = "none";
}

$('#image-map area').hover(
	function () {
		var coords = $(this).attr('coords').split(',');
		var width = $('.image-map-container').width();
		var height = $('.image-map-container').height();
		$('.image-map-container .map-selector').addClass('hover').css({
			'left': coords[0]+'px',
			'top': coords[1] + 'px',
			'right': width - coords[2],
			'bottom': height - coords[3]
		})
	 },
	function () {
		$('.image-map-container .map-selector').removeClass('hover').attr('style','');
	}
)

</script>

{% endblock head %}
{% block body %}

            <!-- The Modal -->
<div id="myModal" class="modal">
  <span class="close">&times;</span>
  <img class="modal-content" id="img01">
  <div id="caption"></div>
</div>

<table style="width:100%;height:100%;">
<tr><td>
<div align="left" style="position: relative;left: 0;top: 0" class="image-map-container">
    {% load static %}
    <img src="{% static '/images/SenFORCE.png'%}" alt="SenForce Car" width="300px" height="600px" usemap="#image-map">
    <div class="map-selector"></div></div>
    <map name="image-map" id="image-map">
	<!--********************* Left Side  ****************************-->
  <div class="tooltip">
      <area shape="rect" coords="62,305,101,335" id="cam1" href="#" onclick="func(1)"/>
  <span class="tooltiptext">Front Left Camera</span>
  </div>
  <area shape="rect" coords="62,360,99,381" href="#" onclick="func(2)" id="cam2"/>
    <area shape="rect" coords="65,415,101,439" href="#" onclick="func(3)" id="cam3"/>

	<!--****************************** Right side ********************-->
    <area shape="rect" coords="198,308,242,332" href="#" onclick="func(4)" id="cam4">
    <area shape="rect" coords="203,359,239,382" href="#" onclick="func(5)" id="cam5">
    <area shape="rect" coords="204,409,239,440" href="#" onclick="func(6)" id="cam6">
</map>

</td>

<td>

    <div class="container">
        <div class="row">

			   <div class="col-lg-4 col-md-4 col-sm-4">
            <div class="panel panel-primary">
                <div class="panel-heading">
                <h3 class="panel-title" align="center">Snapshot</h3>
                </div>

                <div class="panel-body" align="center">
			 <img id='snaps' src="http://www.sensennetworks.com/images/news_logan.jpg"  alt="Snapshot" width="333px" height="240px"/> </div>
            </div>
          </div>

             <div class="col-lg-4 col-md-4 col-sm-4">
            <div class="panel panel-primary">
                <div class="panel-heading">
                <h3 class="panel-title" align="center">Live Feed</h3>
                </div>

                <div class="panel-body" align="center">
                    <button onclick="video_but()" id="vidbut" hidden>Click to see live feed!</button>
                    <iframe id="ivideo" width="100%" height="233" src="https://www.youtube.com/embed/Po_2NuFwaN4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>

              </div>
            </div>
          </div>

        </div></div></td></tr></table>
{% endblock body %}